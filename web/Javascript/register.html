<html>

<head>
<title>Register</title>
<!--
Andres Delikat
Web page programming assignment 13
Chapter 14 Scripting Exercise 2
-->

<script language="JavaScript" src="cookieLib.js"
type="text/javascript">
</script>

<script language="Javascript" type="text/javascript">

function SubmitForm(Name,Email)
{
	document.write("You have successfully registered!<br>")
		
	//Store info in cookie
	var expDate = new Date(now.getTime() + (365*24*60*60*1000))
	SetCookie("Username", Name, expDate, "/")
	SetCookie("Email", Email, expDate, "/")
	SetCookie("Registered", true")
}

</script>

</head>

<body>
<h1>Greetings!</h1>

<script language= "javascript" type="text/javascript">
var cookieName = GetCookie("Username")
var cookieEmail = GetCookie("Email")
var registered = GetCookie("Registered")


//Keep track of the number of times visited this page
var visitCount = GetCookie("Visited")
visitCount = visitCount + 1
//var exp = new Date(now.getTime() + (365*24*60*60*1000))
var exp = new Date(99999999)
SetCookie("Visited", visitCount, exp, "/")

if (registered)
{
	document.write("Welcome back, ", cookieName, "<br>")
	document.write("This is visit number: ", visitCount)
}
else if (visitCount == 1 || visitCount % 3 == 0)
{
	document.write("Please register")
}

</script>

<form name='LoginData' method='post'>
<table border="0">
<tr>
	<td>Name:</td>
	<td><input type = "text" name = "username"></td>
</tr>
<tr>
	<td>Email:</td>
	<td><input type = "text" name = "email"></td>
</tr>
<tr>
	<td><input type = "button" value="Submit" onClick="SubmitForm(document.LoginData.username.value,document.LoginData.email.value)"></td>
</tr>
</table>
</form>


<script language= "javascript" type="text/javascript">
</script>
</body>
</html>
